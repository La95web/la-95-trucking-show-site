---
export const prerender = false;

import SpanishLayout from "../layouts/SpanishLayout.astro";
import Team2 from "../assets/image/tipDesk.webp";
import Footer from "../components/Footer.astro";
import News from "../components/Allnews.astro";
import HeaderNews from "../components/HeaderNews.astro";
import Allnewsvideo from "../components/Allnewsvideo.astro";

const res = await fetch(import.meta.env.PUBLIC_API_BASE_URL + 'news');
const articles = await res.json();

const lastArticle = articles
  .filter(a => a.language === 'spanish')
  .sort((a, b) => {
  const dateDiff =
    new Date(b.uploaded_at).getTime() -
    new Date(a.uploaded_at).getTime();
  if (dateDiff !== 0) return dateDiff;
  return b.id - a.id;
})[0];
---

<SpanishLayout 
  title={lastArticle?.title ?? "La 95 Trucking Show"}
  ogTitle={lastArticle?.title}
  ogDescription={lastArticle?.content?.slice(0, 120)}
  ogImage={lastArticle?.thumbnail_url}
  ogUrl="https://la95truckingshow.com/noticias">
  <HeaderNews 
  titleB="noticias"
  Team2={Team2}/>
  <News
  link1="/trailers/"
  link2="/tractors/"
  link3="/documents/"
  link4="/safety/"
  link5="/noticias/"
  navTips1="trailers"
  navTips2="tractors"
  navTips3="documentos"
  navTips4="safety"
  navTips5="noticias"
  title="noticias"
  paragraph="Aqui encontrarás las últimas novedades y actualizaciones del mundo del transporte y la logística. Mantente informado sobre tendencias, regulaciones y eventos importantes que afectan a los camioneros y la industria en general."
  button="ver más" />
  <Allnewsvideo language="es" />
  <Footer />
</SpanishLayout>
<script>
  import "../scripts/mainMenu.js";
  import "../scripts/SearchNews.js"
  import "../scripts/toggleReadMore.js";
</script>