---
import AdminDashboard from "../../../layouts/AdminDashboard.astro";
const articles = await fetch(import.meta.env.PUBLIC_API_BASE_URL.concat('articles'), {
  method: 'GET',
  headers: {
    'Accept': 'application/json',
  },
}).then((response) => response.json());
const reversedArticles = articles.reverse();
---
<AdminDashboard title="Articles">
  <h1>Lista de Art√≠culos</h1>
  <ul>
    {reversedArticles.map((article) => (
      <li>
        <h2>{article.title}</h2>
        {article.main_image_url && <img src={article.main_image_url} alt="Article main image" />}
        <p>{article.type}</p>
        <p>{new Date(article.uploaded_at).toLocaleDateString(undefined, {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        })}</p>
        <a href={`/admin/articles/${article.id}`}>Ver Secciones</a>
      </li>
    ))}
  </ul>
</AdminDashboard>

<style lang="scss">
  @use '../../../assets/sass/' as *;

  ul {
    list-style: none;
    padding: 0;
  }

  li {
    margin-bottom: 1rem;
  }

  img {
    width: 100px;
    height: auto;
  }

  a {
    color: $accent-b-light;
    text-decoration: none;
  }
</style>