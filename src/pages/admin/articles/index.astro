---
export const prerender = false;

import ArticleForm from "../../../components/forms/article-form/ArticleForm";
import ArticlesListItem from "../../../components/lists/list-items/articles-list-item/ArticlesListItem";
import AdminDashboard from "../../../layouts/AdminDashboard.astro";
const articles = await fetch(import.meta.env.PUBLIC_API_BASE_URL.concat('articles'), {
  method: 'GET',
  headers: {
    'Accept': 'application/json',
  },
}).then((response) => response.json());
const reversedArticles = articles.reverse();
---
<AdminDashboard title="Articles">
  <article>
    <h1>Art√≠culos</h1>
    <h2>Sube un nuevo Tips aqui</h2>
  </article>
  <ArticleForm client:load />
  <h2>Lista de Tps</h2>
  <ul>
    {reversedArticles.map((article) => (
      <ArticlesListItem article={article} client:load />
    ))}
  </ul>
</AdminDashboard>

<style lang="scss">
  @use '../../../assets/sass/' as *;
  h1, h2 {
    text-align: center;
    color: $accent-b-dark;
  }

  article{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    margin: 50px 0;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  li {
    @include center-contents;

    justify-content: space-between;
    margin-bottom: 2rem;
    padding: 0 3rem;
  }

  img {
    width: 100px;
    height: auto;
  }

  a {
    color: $accent-b-light;
    text-decoration: none;
  }
</style>